name: go-github-actions
run-name: ${{ github.actor }} testing go actions
on: [push]
jobs:
  test-go:
    runs-on: ubuntu-latest
    steps:
      - name: 💻 Máquina virtual
        run: echo "Esse job está rodando em um servidor ${{ runner.os }}."
      - name: 📚 Checkout do repositório
        uses: actions/checkout@v3
      - name: ▶ Testes e Coverage
        run: make test-coverage

      - name: 👨‍💻 Git commit and push all changed files
        env:
          CI_COMMIT_MESSAGE: Continuous Integration Build Artifacts
          CI_COMMIT_AUTHOR: Continuous Integration
        run: |
          git config --global user.name "${{ env.CI_COMMIT_AUTHOR }}"
          git config --global user.email "jeziel.almeida16@gmail.com"
          git add .
          git commit -m "${{ env.CI_COMMIT_MESSAGE }}"
          git push

      - name: ✔ Status do Job
        run: echo "Status do job -> ${{ job.status }}."